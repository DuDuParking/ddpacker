<!DOCTYPE html>
<html>
<head>
		<meta charset="utf-8">
		<title>嘟嘟停车</title>
		<script type="text/javascript" src="cordova.js"></script>
		<script>
	// 微信支付
 	function wxzhifu(){
 		
 		var status = "navigator.notification.confirm";
 		var element = document.getElementById('wxlog');
		/*element.innerHTML = status;
		alert(status);
		navigator.notification.confirm(
        '正在支付请稍后',
        wxresults,
        '小贴士',
        ['未完成支付','已完成支付']
   		 );
   		 */
        var timestamp = Date.parse(new Date());
		var out_trade_no= "t"+timestamp;//15位订单号
		var url = "http://weixin.qq.com"; //异步同步接口
		var bodtxt = "test";
		var total_fee = "0.01";
		status = "Pgwxpay.wxpay";
		element.innerHTML = status;
		alert(status);
  	Pgwxpay.wxpay(
	   out_trade_no,url,bodtxt,total_fee*100,
	   			function(success) {
	   				var element = document.getElementById('wxlog');
					  element.innerHTML = "支付结果:"+success.code;
                  alert(element.innerHTML);
					 console.log(success);
            }, function(fail) {
            	var element = document.getElementById('wxlog');
					  element.innerHTML = "接口调用失败:"+fail;
                  alert(element.innerHTML);
                    console.log(fail);
       }
       );
 }
 
 
 //支付结果回调接收
 function wxresults(button){
	 
	  Pgwxpay.getcode(
	 		function(success) {
	 //data = -2 支付失败
	 //data = -1 支付参数错误
	 //data = 0  支付成功
	 
					  var element = document.getElementById('wxlog');
					  element.innerHTML = "支付结果:"+success;
                      alert(element.innerHTML);
					  console.log(success);
            }, function(fail) {
                      var element = document.getElementById('wxlog');
                      element.innerHTML = "接口调用失败:"+fail;
                      alert(element.innerHTML);
                      console.log(fail);
       });
	}
	
	//检查是否有微信
 function iswx(button){
	 
	  Pgwxpay.iswx(
	 		function(success) {
	 //data = 1 有微信
	 //data = 0 无微信
					  var element = document.getElementById('wxlog');
					  element.innerHTML = "检查微信:"+success;
                      alert(element.innerHTML);
					  console.log(success);
            }, function(fail) {
                      var element = document.getElementById('wxlog');
                      element.innerHTML = "接口调用失败:"+fail;
                      alert(element.innerHTML);
                      console.log(fail);
       });
	}
</script>
</head>
<body>
<br><br><br><br><br>
<input type="button" value="测试" onclick="wxzhifu();">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="button" value="查看" onclick="wxresults();">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="button" value="检查环境" onclick="iswx();">
<div id="wxlog"></div>
</body>
</html>